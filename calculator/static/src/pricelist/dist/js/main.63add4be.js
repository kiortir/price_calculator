var K=Object.defineProperty;var E=Object.getOwnPropertySymbols;var N=Object.prototype.hasOwnProperty,R=Object.prototype.propertyIsEnumerable;var O=(a,n,e)=>n in a?K(a,n,{enumerable:!0,configurable:!0,writable:!0,value:e}):a[n]=e,B=(a,n)=>{for(var e in n||(n={}))N.call(n,e)&&O(a,e,n[e]);if(E)for(var e of E(n))R.call(n,e)&&O(a,e,n[e]);return a};import{d as w,u as j,a as A,r as M,c as b,o as i,b as f,e as l,w as D,v as V,f as u,i as y,g as h,h as m,F as k,j as $,T as F,p as U,k as W,n as Q,t as C,l as S,m as Y,q as G,s as x,Q as q,_ as J,x as P,y as L,G as X,Y as Z,z as ee,A as te,K as se,B as ae,C as ne,D as le,E as oe,H as I,I as re,J as ue,L as ie}from"./vendor.3ca71000.js";var ce=(a,n)=>{const e=a.__vccOpts||a;for(const[t,o]of n)e[t]=o;return e};const de=a=>(U("data-v-7ce2673f"),a=a(),W(),a),pe={class:"flex-col flex gap-3"},fe={class:"search-tab w-full mt-4 relative"},_e=de(()=>l("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-auto"},[l("svg",{class:"absolute h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[l("path",{"fill-rule":"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z","clip-rule":"evenodd"})])],-1)),ve=["onClick"],me={class:"text-left pl-3"},he={class:""},ge=w({props:{tab:null},emits:["update"],setup(a,{emit:n}){const e=a;j("tailwind");const t=A();function o(s){n("update",s),t.dispatch("loadManufacturer",s)}let p=M(""),c=b(()=>Object.values(t.state.manufacturers).filter(s=>s.name.toLowerCase().startsWith(p.value.toLowerCase())));b(()=>Object.assign({},...Object.values(t.state.manufacturers).map(s=>({[s.name]:r(s.card_color)}))));function r(s){console.log(s),s=s.replace("#","");let d=parseInt(s.substring(0,2),16),_=parseInt(s.substring(2,4),16),g=parseInt(s.substring(4,6),16);var v=(d*299+_*587+g*114)/1e3;return v>=128?"#323338":"white"}return(s,d)=>(i(),f("div",pe,[l("div",fe,[_e,D(l("input",{"onUpdate:modelValue":d[0]||(d[0]=_=>y(p)?p.value=_:p=_),type:"text",class:"font-sans block w-full pl-10 py-2 px-3 ring-1 ring-palette_olive/[0.4] rounded-lg accent-palette_accent"},null,512),[[V,u(p)]])]),h(F,{class:"result-tab flex flex-col w-full mx-auto gap-3 lg:gap-2 lg:divide-y",name:"list",tag:"div"},{default:m(()=>[(i(!0),f(k,null,$(u(c),_=>(i(),f("div",{type:"button",class:Q(["text-white ring-1 lg:ring-0 rounded-lg lg:rounded-md transition-color duration-300 text-xl font-sans py-2 hover:shadow-md hover:brightness-105 lg:hover:brightness-105 active:contrast-125 lg:active:contrast-125",[_.name===e.tab?"bg-[#5b95f9]":"bg-[#26a69a] "]]),key:_.id,onClick:g=>o(_.name)},[l("div",me,[l("span",he,C(_.name),1)])],10,ve))),128))]),_:1})]))}});var T=ce(ge,[["__scopeId","data-v-7ce2673f"]]);const ye={class:"overflow-x-auto border-slate-300 h-full"},xe={class:"table-fixed border-collapse h-content overflow-hidden lg:border-t"},be={key:0,class:"sticky top-0"},we=["colspan","rowspan"],ke=w({props:{columns:null,source:null,filter:null},setup(a){const n=a,e={name:{"text-align":"left","font-weight":550}},t=b(()=>{const c=new Map;c.map=new Map;let r=n.columns,s=0;if(r.length){for(;;){const d=new Map;let _=0,g=[];if(r.forEach(v=>{let H=`${_++}${v.prop}`||`${_++}${v.name}`;d.set(H,v),v.children!==void 0?g=g.concat(...v.children):v.prop!==void 0&&c.map.set(v.prop,"_")}),c.set(s++,d),g.length==0)break;r=g}return c}else return new Map}),o=b(()=>n.source.filter(c=>{const r=n.filter.toLowerCase();return c.name.toLowerCase().startsWith(r)||(c.code!==null?c.code.toLowerCase().startsWith(r):!1)})),p=b(()=>t.value.size>0?new Map([...t.value].filter(c=>new Set([...c[1].values()].map(s=>s.name)).size>1)):new Map);return(c,r)=>(i(),f("div",ye,[l("table",xe,[u(t).keys()?(i(),f("thead",be,[u(t).values()?(i(!0),f(k,{key:0},$(u(p).values(),s=>(i(),f("tr",null,[(i(!0),f(k,null,$(s.values(),d=>(i(),f("th",{colspan:d.colspan||1,class:"border-x first:border-l-0 last:border-r-0 border-b px-5 font-sans",rowspan:d.children?1:3},C(d.name),9,we))),256))]))),256)):S("",!0)])):S("",!0),h(F,{class:"",name:"list",tag:"tbody"},{default:m(()=>[(i(!0),f(k,null,$(u(o),s=>(i(),f("tr",{class:"even:bg-[#ddf2f0] hover:bg-sky-200 transition-colors duration-150",key:s.name},[(i(!0),f(k,null,$(u(t).map.keys(),d=>(i(),f("td",{class:"border-r last:border-r-0 border-t px-5 font-sans",key:d,style:Y(e[d])},C(s[d]||"-"),5))),128))]))),128))]),_:1})])]))}});const $e={class:"relative flex flex-col gap-y-3 w-full lg:px-3"},Me={class:"searchcontainer px-3 lg:self-end"},Ce={class:"search-tab mt-4 relative w-full lg:w-80 mx-auto lg:mx-0 max-w-80 h-100"},ze=l("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-auto"},[l("svg",{class:"absolute h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[l("path",{"fill-rule":"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z","clip-rule":"evenodd"})])],-1),Be=w({props:{manufacturer:null},setup(a){const n=a,e=A();let t=b(()=>e.state.manufacturers[n.manufacturer]||{stones:[],schema:{headers:{}}}),o=M("");const p=M();function c(r){(r.key=="F3"||r.ctrlKey&&r.code=="KeyF")&&(r.preventDefault(),p.value.focus()),r.key=="Escape"&&(document.activeElement===p.value?p.value.blur():o.value="")}return G(()=>{window.addEventListener("keydown",c)}),(r,s)=>(i(),f("div",$e,[l("div",Me,[l("div",Ce,[ze,D(l("input",{ref_key:"stonesearch",ref:p,placeholder:"\u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u043D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u043A\u0430\u043C\u043D\u044F","onUpdate:modelValue":s[0]||(s[0]=d=>y(o)?o.value=d:o=d),type:"text",class:"font-sans block w-full pl-10 py-2 ring-1 rounded-lg accent-palette_accent"},null,512),[[V,u(o)]])])]),(i(),x(ke,{columns:u(t).schema,source:u(t).stones,filter:u(o),key:a.manufacturer},null,8,["columns","source","filter"]))]))}}),Ie={class:""},Ae={class:"min-h-screen px-4 text-center fixed lg:inset-0 z-40"},Ee=l("span",{class:"inline-block h-screen align-middle","aria-hidden":"true"},"\u200B",-1),Oe={class:"overflow-y-auto overflow-x-hidden inline-block w-full fixed lg:relative top-0 left-0 lg:top-auto lg:left-auto h-screen lg:max-h-[90vh] lg:md:max-w-[45vw] lg:min-h-[70vh] p-6 text-left lg:align-middle transition-all transform bg-white shadow-xl lg:rounded-2xl"},Se={class:"flex flex-grow"},qe=l("button",{class:"h-full rounded-full focus:outline-none"},[l("svg",{class:"h-6 w-6 text-gray-300",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[l("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),l("line",{x1:"6",y1:"6",x2:"18",y2:"18"})])],-1),Le=[qe],Te={class:"dialog-body border-t border-slate-700"},je=w({props:{open:{type:Boolean}},emits:["setIsOpen"],setup(a,{emit:n}){const e=a;function t(o){n("setIsOpen",o)}return(o,p)=>(i(),x(u(Z),{appear:"",show:e.open,as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:m(()=>[h(u(X),{open:e.open,onClose:t},{default:m(()=>[l("div",Ie,[l("div",Ae,[h(u(q),{as:"template",enter:"duration-200 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-100 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:m(()=>[h(u(J),{class:"fixed inset-0 bg-black opacity-30"})]),_:1}),Ee,h(u(q),{as:"template",enter:"duration-200 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-100 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:m(()=>[l("div",Oe,[h(u(P),{as:"h3",class:"text-2xl font-medium leading-6 mb-4 text-gray-900 flex flex-row gap-3 place-items-center"},{default:m(()=>[l("div",Se,[L(o.$slots,"title")]),l("div",{class:"flex align-middle",onClick:p[0]||(p[0]=c=>t(!1))},Le)]),_:3}),l("div",Te,[L(o.$slots,"body")])])]),_:3})])])]),_:3},8,["open"])]),_:3},8,["show"]))}}),De={class:"flex flex-col lg:flex-row mx-auto"},Ve={class:"manufacturer-nav mb-2 lg:mb-0 sticky flex flex-col min-w-[250px] lg:h-screen top-0 overflow-y-auto border-slate-600 z-20"},Fe={class:"gap-y-2 flex-col px-2 flex border-r pt-[1px] bg-white lg:h-screen"},Ge={class:"lg:hidden"},He={class:"nav flex flex-row gap-2 place-items-center border-b p-3 h-12 w-full"},Ke={class:"text-xl flex-grow text-left"},Ne=l("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 16V4m0 0L3 8m4-4l4 4m6 0v12m0 0l4-4m-4 4l-4-4"})],-1),Re=[Ne],Ue=ae("\u041F\u0440\u043E\u0438\u0437\u0432\u043E\u0434\u0438\u0442\u0435\u043B\u0438"),We=w({setup(a){const n=ee(),e=te();let t=M(!1),o=M("Avant");b({get(){return n.query.manufacturer||"Avant"},set(c){const r=Object.assign({},{manufacturer:c});e.push({query:r})}});const p=j("tailwind");return(c,r)=>(i(),f("div",De,[l("div",Ve,[l("div",Fe,[l("div",Ge,[l("div",He,[l("div",Ke,C(u(o)),1),l("div",{type:"button",id:"mobile-func-header",class:"show-manufacturers rounded-full p-1",onClick:r[0]||(r[0]=s=>y(t)?t.value=!u(t):t=!u(t))},Re)])]),u(p).lg?(i(),x(T,{key:0,tab:u(o),onUpdate:r[1]||(r[1]=s=>y(o)?o.value=s:o=s)},null,8,["tab"])):(i(),x(je,{key:1,open:u(t),onSetIsOpen:r[3]||(r[3]=s=>y(t)?t.value=s:t=s)},{title:m(()=>[Ue]),body:m(()=>[(i(),x(se,null,[(i(),x(T,{tab:u(o),key:u(o),onUpdate:r[2]||(r[2]=s=>{y(o)?o.value=s:o=s,y(t)?t.value=!1:t=!1})},null,8,["tab"]))],1024))]),_:1},8,["open"]))])]),h(Be,{manufacturer:u(o)},null,8,["manufacturer"])]))}}),Qe=[{path:"/",name:"Home",component:We}],Ye=ne({history:le("/pricelist/quartz/"),routes:Qe});var Je=oe({state:{manufacturers:[]},mutations:{setManufacturers(a,n){a.manufacturers=Object.assign({},...n.map(e=>({[e.name]:e})))},addManufacturers(a,n){n.forEach(e=>{a.manufacturers[e.name]=B(B({},a.manufacturers[e.name]),e)})}},actions:{async hydrate({commit:a,dispatch:n}){I.post("manufacturers/").then(e=>(a("setManufacturers",e.data),e.data)).then(e=>e.forEach(t=>n("loadManufacturer",t.name)))},async loadManufacturer({state:a,commit:n},e){Array.isArray(e)||(e=[e]),e=e.filter(t=>!a.manufacturers[t].stones.length),e.length&&I.post("manufacturer/",{manufacturers:e}).then(t=>{n("addManufacturers",t.data)})}},getters:{isDesktop(){return window.matchMedia("(min-width: 1024px)").matches}}});const Pe=w({setup(a){const n=A();return G(async()=>{n.dispatch("hydrate")}),(e,t)=>{const o=re("router-view");return i(),x(o)}}});const z=ue(Pe);z.use(ie,I);z.use(Ye);z.use(Je);z.mount("#app");
